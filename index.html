<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Game Shop</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --bg-color: #121212;
            --card-bg: #1e1e1e;
            --accent: #ffb703; /* –ñ–µ–ª—Ç—ã–π Brawl */
            --accent-blue: #219ebc; /* –°–∏–Ω–∏–π Clash */
            --text-main: #ffffff;
            --text-sec: #aaaaaa;
            --green: #2ecc71;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-main);
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
            -webkit-tap-highlight-color: transparent;
        }

        /* HEADER */
        .header {
            position: sticky;
            top: 0;
            background: rgba(18, 18, 18, 0.95);
            backdrop-filter: blur(10px);
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 100;
            border-bottom: 1px solid #333;
        }
        .wallet {
            display: flex;
            gap: 15px;
            font-weight: 700;
            font-size: 14px;
        }
        .currency { display: flex; align-items: center; gap: 5px; }

        /* CONTENT */
        .container { padding: 20px; padding-bottom: 100px; }
        
        h2 { margin-top: 0; font-size: 20px; }

        /* GAMES GRID */
        .games-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 30px;
        }
        .game-card {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: transform 0.1s;
            border: 2px solid transparent;
        }
        .game-card:active { transform: scale(0.95); }
        .game-card.selected { border-color: var(--accent); }
        .game-icon {
            width: 60px; height: 60px;
            border-radius: 12px;
            margin-bottom: 10px;
            background-size: cover;
        }

        /* SLIDERS */
        .slider-container {
            display: flex;
            overflow-x: auto;
            gap: 15px;
            padding-bottom: 10px;
            scrollbar-width: none; /* Firefox */
        }
        .slider-container::-webkit-scrollbar { display: none; }
        
        .item-card {
            min-width: 140px;
            background: var(--card-bg);
            border-radius: 14px;
            padding: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
        }
        .item-img { width: 80px; height: 80px; background: #333; border-radius: 50%; margin-bottom: 10px; }
        .price-tag { font-size: 12px; color: var(--text-sec); margin-top: 5px; }
        .buy-btn {
            background: var(--accent-blue);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 8px;
            margin-top: 10px;
            width: 100%;
            font-weight: 600;
            cursor: pointer;
        }

        /* MODALS */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            display: none;
            justify-content: center;
            align-items: center;
            opacity: 0;
            transition: opacity 0.3s;
        }
        .modal-overlay.active { display: flex; opacity: 1; }
        
        .modal-content {
            background: #252525;
            width: 85%;
            border-radius: 20px;
            padding: 25px;
            text-align: center;
            position: relative;
            transform: translateY(20px);
            transition: transform 0.3s;
        }
        .modal-overlay.active .modal-content { transform: translateY(0); }

        /* DAILY CHECK-IN */
        .daily-row {
            display: flex;
            justify-content: space-between;
            margin: 20px 0;
            overflow-x: auto;
        }
        .day-box {
            background: #333;
            min-width: 40px;
            height: 60px;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            margin-right: 5px;
            font-size: 10px;
            opacity: 0.5;
        }
        .day-box.active { background: var(--green); opacity: 1; color: #000; font-weight: bold; }
        .day-box.current { border: 2px solid var(--accent); opacity: 1; }

        /* ROULETTE */
        .wheel-container {
            width: 250px; height: 250px;
            margin: 0 auto 20px;
            border-radius: 50%;
            border: 5px solid #fff;
            position: relative;
            overflow: hidden;
            transition: transform 4s cubic-bezier(0.17, 0.67, 0.12, 0.99);
            background: conic-gradient(
                #ffb703 0deg 60deg, 
                #fb8500 60deg 120deg, 
                #ffb703 120deg 180deg, 
                #fb8500 180deg 240deg, 
                #ffb703 240deg 300deg, 
                #fb8500 300deg 360deg
            );
        }
        .wheel-pointer {
            position: absolute; top: -10px; left: 50%;
            transform: translateX(-50%);
            width: 0; height: 0;
            border-left: 15px solid transparent;
            border-right: 15px solid transparent;
            border-top: 20px solid white;
            z-index: 2;
        }
        .wheel-item {
            position: absolute;
            width: 50%; height: 50%;
            top: 50%; left: 50%;
            transform-origin: 0 0;
            text-align: right;
            padding-right: 30px;
            box-sizing: border-box;
            font-weight: bold;
            font-size: 14px;
            line-height: 0;
            color: #000;
        }

        /* ADMIN PANEL */
        .admin-btn {
            position: fixed; bottom: 20px; right: 20px;
            background: #e63946; color: white;
            width: 50px; height: 50px; border-radius: 50%;
            display: none; justify-content: center; align-items: center;
            font-size: 24px; box-shadow: 0 4px 12px rgba(230,57,70,0.5);
            z-index: 90; cursor: pointer;
        }
        .admin-form input, .admin-form select {
            width: 100%; margin-bottom: 10px; padding: 10px;
            border-radius: 8px; border: none; background: #333; color: white;
        }
    </style>
</head>
<body>

    <div class="header">
        <div class="wallet">
            <div class="currency">ü™ô <span id="balance-coins">0</span></div>
            <div class="currency">‚ÇΩ <span id="balance-rub">0</span></div>
        </div>
        <div id="user-name">Guest</div>
    </div>

    <div class="container">
        <h2>–í—ã–±–µ—Ä–∏—Ç–µ –∏–≥—Ä—É</h2>
        <div class="games-grid" id="games-container">
            </div>

        <div id="shop-section" style="display:none;">
            <h2 id="selected-game-title">–¢–æ–≤–∞—Ä—ã</h2>
            <div class="slider-container" id="products-container">
                </div>
        </div>

        <div style="margin-top: 30px; background: #252525; padding: 15px; border-radius: 16px;">
            <h3>–ü—Ä–æ–º–æ–∫–æ–¥</h3>
            <p style="font-size: 12px; color: #aaa;">–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –¥–ª—è –º–æ–Ω–µ—Ç –∏–ª–∏ –≤—Ä–∞—â–µ–Ω–∏—è –∫–æ–ª–µ—Å–∞</p>
            <input type="text" id="promo-input" placeholder="–ö–æ–¥..." style="width: 100%; padding: 10px; border-radius: 8px; border:none; margin-bottom:10px; box-sizing:border-box;">
            <button onclick="activatePromo()" style="width: 100%; padding: 10px; background: #fff; color: #000; border:none; border-radius: 8px; font-weight:bold;">–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å</button>
        </div>
    </div>

    <div id="admin-float-btn" class="admin-btn" onclick="openAdmin()">‚öôÔ∏è</div>

    <div id="daily-modal" class="modal-overlay">
        <div class="modal-content">
            <h3>üìÖ –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è –Ω–∞–≥—Ä–∞–¥–∞</h3>
            <p>–ó–∞–±–∏—Ä–∞–π –±–æ–Ω—É—Å—ã –∫–∞–∂–¥—ã–π –¥–µ–Ω—å!</p>
            <div class="daily-row" id="daily-days">
                </div>
            <button onclick="claimDaily()" id="claim-btn" style="width:100%; padding:15px; background:var(--green); border:none; border-radius:12px; color:#fff; font-weight:bold;">–ó–ê–ë–†–ê–¢–¨</button>
        </div>
    </div>

    <div id="roulette-modal" class="modal-overlay">
        <div class="modal-content" style="background: #1a0b2e; border: 1px solid #ffb703;">
            <h3 style="color: #ffb703;">üé∞ –ö–û–õ–ï–°–û –§–û–†–¢–£–ù–´</h3>
            <div style="position: relative; padding-top: 20px;">
                <div class="wheel-pointer"></div>
                <div class="wheel-container" id="wheel">
                    </div>
            </div>
            <button onclick="spinWheel()" id="spin-btn" style="width:100%; padding:15px; background: #ffb703; border:none; border-radius:12px; color:#000; font-weight:bold; margin-top:15px;">–ö–†–£–¢–ò–¢–¨</button>
            <button onclick="closeModal('roulette-modal')" style="background:transparent; color:#aaa; border:none; margin-top:10px;">–ó–∞–∫—Ä—ã—Ç—å</button>
        </div>
    </div>

    <div id="admin-modal" class="modal-overlay">
        <div class="modal-content admin-form" style="text-align: left;">
            <h3>‚öôÔ∏è –ê–¥–º–∏–Ω –ü–∞–Ω–µ–ª—å</h3>
            
            <h4>–î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä</h4>
            <select id="adm-game-select"></select>
            <input type="text" id="adm-name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ (–Ω–∞–ø—Ä. 30 –ì–µ–º–æ–≤)">
            <input type="number" id="adm-price-c" placeholder="–¶–µ–Ω–∞ –≤ –º–æ–Ω–µ—Ç–∞—Ö">
            <input type="number" id="adm-price-r" placeholder="–¶–µ–Ω–∞ –≤ —Ä—É–±–ª—è—Ö">
            <button onclick="admAddProduct()" style="width:100%; padding:10px; background:blue; color:white; border:none; border-radius:8px;">–î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä</button>
            
            <hr style="border-color: #444; margin: 15px 0;">
            
            <h4>–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ü—Ä–æ–º–æ</h4>
            <select id="adm-promo-type">
                <option value="coins">–ú–æ–Ω–µ—Ç—ã (+100)</option>
                <option value="spin">–í—Ä–∞—â–µ–Ω–∏–µ –∫–æ–ª–µ—Å–∞</option>
            </select>
            <input type="text" id="adm-code" placeholder="–ö–æ–¥ (–Ω–∞–ø—Ä. BONUS2025)">
            <button onclick="admAddPromo()" style="width:100%; padding:10px; background:green; color:white; border:none; border-radius:8px;">–°–æ–∑–¥–∞—Ç—å –∫–æ–¥</button>

            <button onclick="closeModal('admin-modal')" style="width:100%; padding:10px; background:#444; color:white; border:none; border-radius:8px; margin-top:15px;">–ó–∞–∫—Ä—ã—Ç—å</button>
        </div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        // === 1. –ù–ê–°–¢–†–û–ô–ö–ò –ò –î–ê–ù–ù–´–ï (–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –≤ –ø–∞–º—è—Ç–∏) ===
        // –í–ê–ñ–ù–û: –í—Å—Ç–∞–≤—å —Å—é–¥–∞ —Å–≤–æ–π ID —Ç–µ–ª–µ–≥—Ä–∞–º, —á—Ç–æ–±—ã –≤–∏–¥–µ—Ç—å –∞–¥–º–∏–Ω–∫—É!
        const ADMIN_ID = 947269219; // <--- –ó–ê–ú–ï–ù–ò–¢–¨ –ù–ê –°–í–û–ô ID

        // –ù–∞—á–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞—à–µ–ª –ø–µ—Ä–≤—ã–π —Ä–∞–∑)
        const defaultData = {
            coins: 0,
            rubles: 0,
            loginStreak: 0,
            lastLoginDate: null,
            inventory: [],
            usedPromos: []
        };

        // –ò–≥—Ä—ã –∏ —Ç–æ–≤–∞—Ä—ã (–ú–æ–∂–µ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∞–¥–º–∏–Ω)
        let games = [
            { id: 'brawl', name: 'Brawl Stars', color: '#ffb703', icon: 'https://cdn-icons-png.flaticon.com/512/2696/2696047.png' },
            { id: 'clash', name: 'Clash Royale', color: '#219ebc', icon: 'https://cdn-icons-png.flaticon.com/512/1198/1198270.png' }
        ];

        let products = [
            { gameId: 'brawl', name: '30 –ì–µ–º–æ–≤', priceC: 50, priceR: 99, img: '' },
            { gameId: 'brawl', name: 'Brawl Pass', priceC: 500, priceR: 899, img: '' },
            { gameId: 'clash', name: '1000 –ó–æ–ª–æ—Ç–∞', priceC: 20, priceR: 49, img: '' },
        ];

        let promos = {
            'START': { type: 'coins', val: 100 },
            'SPIN': { type: 'spin', val: 1 }
        };

        // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö —é–∑–µ—Ä–∞ –∏–∑ LocalStorage (–ü–∞–º—è—Ç—å —Ç–µ–ª–µ—Ñ–æ–Ω–∞)
        let user = JSON.parse(localStorage.getItem('user_data')) || defaultData;
        
        // === 2. –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ===
        function init() {
            // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —é–∑–µ—Ä–∞
            const tgUser = tg.initDataUnsafe.user;
            document.getElementById('user-name').innerText = tgUser ? tgUser.first_name : 'Guest';
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –∞–¥–º–∏–Ω–∞
            if (tgUser && tgUser.id === ADMIN_ID) {
                document.getElementById('admin-float-btn').style.display = 'flex';
            }

            renderBalance();
            renderGames();
            checkDailyLogin();
            initWheel();
        }

        // === 3. –†–ï–ù–î–ï–†–ò–ù–ì –ò–ù–¢–ï–†–§–ï–ô–°–ê ===
        function renderBalance() {
            document.getElementById('balance-coins').innerText = user.coins;
            document.getElementById('balance-rub').innerText = user.rubles;
            saveData();
        }

        function renderGames() {
            const container = document.getElementById('games-container');
            container.innerHTML = '';
            games.forEach(game => {
                const el = document.createElement('div');
                el.className = 'game-card';
                // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ä–µ–∞–ª—å–Ω—ã–µ –∫–∞—Ä—Ç–∏–Ω–∫–∏
                el.innerHTML = `
                    <div class="game-icon" style="background-color: ${game.color}; margin: 0 auto 10px;"></div>
                    <strong>${game.name}</strong>
                `;
                el.onclick = () => selectGame(game);
                container.appendChild(el);
            });
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å–µ–ª–µ–∫—Ç –≤ –∞–¥–º–∏–Ω–∫–µ
            const admSelect = document.getElementById('adm-game-select');
            admSelect.innerHTML = '';
            games.forEach(g => {
                admSelect.innerHTML += `<option value="${g.id}">${g.name}</option>`;
            });
        }

        function selectGame(game) {
            document.getElementById('shop-section').style.display = 'block';
            document.getElementById('selected-game-title').innerText = game.name;
            document.getElementById('selected-game-title').style.color = game.color;
            
            const container = document.getElementById('products-container');
            container.innerHTML = '';

            const gameProducts = products.filter(p => p.gameId === game.id);
            
            if(gameProducts.length === 0) {
                container.innerHTML = '<p style="color:#666;">–¢–æ–≤–∞—Ä–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç</p>';
                return;
            }

            gameProducts.forEach(prod => {
                const el = document.createElement('div');
                el.className = 'item-card';
                el.innerHTML = `
                    <div class="item-img"></div>
                    <strong>${prod.name}</strong>
                    <div class="price-tag">${prod.priceC} ü™ô / ${prod.priceR} ‚ÇΩ</div>
                    <button class="buy-btn" onclick="buyItem('${prod.name}', ${prod.priceC})">–ö—É–ø–∏—Ç—å</button>
                `;
                container.appendChild(el);
            });
            
            // –ü–ª–∞–≤–Ω—ã–π —Å–∫—Ä–æ–ª–ª –∫ —Ç–æ–≤–∞—Ä–∞–º
            document.getElementById('shop-section').scrollIntoView({behavior: "smooth"});
        }

        // === 4. –ï–ñ–ï–î–ù–ï–í–ù–´–ô –ë–û–ù–£–° ===
        function checkDailyLogin() {
            const today = new Date().toDateString();
            if (user.lastLoginDate !== today) {
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ–∫–Ω–æ
                openModal('daily-modal');
                renderDailyGrid();
            }
        }

        function renderDailyGrid() {
            const container = document.getElementById('daily-days');
            container.innerHTML = '';
            for (let i = 1; i <= 7; i++) {
                const el = document.createElement('div');
                el.className = `day-box ${i <= user.loginStreak ? 'active' : ''} ${i === user.loginStreak + 1 ? 'current' : ''}`;
                el.innerHTML = `<span>Day</span><span>${i}</span>`;
                if(i === 7) el.innerHTML += `<span style="font-size:8px">BIG</span>`;
                container.appendChild(el);
            }
        }

        function claimDaily() {
            const today = new Date().toDateString();
            user.lastLoginDate = today;
            user.loginStreak = (user.loginStreak % 7) + 1;
            
            // –ù–∞–≥—Ä–∞–¥–∞
            const reward = 5 * user.loginStreak; // –ü—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è –Ω–∞–≥—Ä–∞–¥–∞
            user.coins += reward;
            
            tg.showAlert(`–í—ã –ø–æ–ª—É—á–∏–ª–∏ ${reward} –º–æ–Ω–µ—Ç!`);
            renderBalance();
            closeModal('daily-modal');
        }

        // === 5. –†–£–õ–ï–¢–ö–ê –ò –ü–†–û–ú–û ===
        function activatePromo() {
            const code = document.getElementById('promo-input').value.trim();
            if (user.usedPromos.includes(code)) {
                tg.showAlert('–í—ã —É–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ —ç—Ç–æ—Ç –∫–æ–¥!');
                return;
            }
            
            if (promos[code]) {
                const reward = promos[code];
                user.usedPromos.push(code);
                
                if (reward.type === 'coins') {
                    user.coins += reward.val;
                    tg.showAlert(`–ü—Ä–æ–º–æ–∫–æ–¥ –ø—Ä–∏–Ω—è—Ç! +${reward.val} –º–æ–Ω–µ—Ç`);
                    renderBalance();
                } else if (reward.type === 'spin') {
                    openModal('roulette-modal');
                }
            } else {
                tg.showAlert('–ù–µ–≤–µ—Ä–Ω—ã–π –∫–æ–¥');
            }
        }

        function initWheel() {
            const wheel = document.getElementById('wheel');
            const prizes = [10, 50, 20, 100, 5, 200]; // 6 —Å–µ–∫—Ç–æ—Ä–æ–≤
            
            prizes.forEach((p, i) => {
                const el = document.createElement('div');
                el.className = 'wheel-item';
                el.style.transform = `rotate(${i * 60}deg)`; // 360 / 6 = 60
                el.innerText = p;
                wheel.appendChild(el);
            });
        }

        function spinWheel() {
            const btn = document.getElementById('spin-btn');
            const wheel = document.getElementById('wheel');
            
            if(btn.disabled) return;
            btn.disabled = true;

            // –†–∞—Å—á–µ—Ç –≤—Ä–∞—â–µ–Ω–∏—è (–º–∏–Ω–∏–º—É–º 5 –æ–±–æ—Ä–æ—Ç–æ–≤ + —Ä–∞–Ω–¥–æ–º)
            const sectorAngle = 60;
            const randomSector = Math.floor(Math.random() * 6);
            const extraDeg = 360 * 5 + (360 - (randomSector * sectorAngle)); 
            
            wheel.style.transform = `rotate(${extraDeg}deg)`;

            // –†–µ–∑—É–ª—å—Ç–∞—Ç
            const prizes = [10, 50, 20, 100, 5, 200];
            const win = prizes[randomSector]; // –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ (–Ω–∞–¥–æ —Å–æ–≥–ª–∞—Å–æ–≤–∞—Ç—å —Å –≥—Ä–∞–¥—É—Å–∞–º–∏)

            setTimeout(() => {
                tg.showAlert(`–í—ã –≤—ã–∏–≥—Ä–∞–ª–∏ ${win} –≥–µ–º–æ–≤! (–£—Å–ª–æ–≤–Ω–æ, –Ω–∞—á–∏—Å–ª–µ–Ω–æ –≤ –º–æ–Ω–µ—Ç—ã)`);
                user.coins += win;
                renderBalance();
                btn.disabled = false;
                closeModal('roulette-modal');
                // –°–±—Ä–æ—Å –∫–æ–ª–µ—Å–∞ –¥–ª—è –∫—Ä–∞—Å–æ—Ç—ã –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å, –Ω–æ —Å–ª–æ–∂–Ω–æ –±–µ–∑ —Å–±–æ—è –∞–Ω–∏–º–∞—Ü–∏–∏
            }, 4000);
        }

        // === 6. –õ–û–ì–ò–ö–ê –ü–û–ö–£–ü–ö–ò ===
        function buyItem(name, price) {
            if(user.coins >= price) {
                tg.showConfirm(`–ö—É–ø–∏—Ç—å ${name} –∑–∞ ${price} –º–æ–Ω–µ—Ç?`, (ok) => {
                    if(ok) {
                        user.coins -= price;
                        // –¢—É—Ç –ø–µ—Ä–µ—Ö–æ–¥ –∫ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—é –∑–∞–∫–∞–∑–∞ –∏–∑ –ø—Ä–æ—à–ª–æ–≥–æ –∫–æ–¥–∞
                        // –î–ª—è –ø—Ä–∏–º–µ—Ä–∞ –ø—Ä–æ—Å—Ç–æ —Å–ø–∏—à–µ–º:
                        renderBalance();
                        tg.showAlert('–£—Å–ø–µ—à–Ω–æ! –°–≤—è–∂–∏—Ç–µ—Å—å —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è.');
                        // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å chat –∞–¥–º–∏–Ω–∞
                    }
                });
            } else {
                tg.showAlert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç! –ü–æ–ø–æ–ª–Ω–∏—Ç–µ –±–∞–ª–∞–Ω—Å.');
            }
        }

        // === 7. –ê–î–ú–ò–ù –ü–ê–ù–ï–õ–¨ ===
        function openAdmin() { openModal('admin-modal'); }

        function admAddProduct() {
            const gameId = document.getElementById('adm-game-select').value;
            const name = document.getElementById('adm-name').value;
            const priceC = parseInt(document.getElementById('adm-price-c').value);
            const priceR = parseInt(document.getElementById('adm-price-r').value);

            if(name && priceC) {
                products.push({ gameId, name, priceC, priceR, img: '' });
                tg.showAlert('–¢–æ–≤–∞—Ä –¥–æ–±–∞–≤–ª–µ–Ω!');
                // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
                if(document.getElementById('selected-game-title').innerText) {
                    const activeGame = games.find(g => g.id === gameId);
                    if(activeGame) selectGame(activeGame);
                }
            }
        }

        function admAddPromo() {
            const type = document.getElementById('adm-promo-type').value;
            const code = document.getElementById('adm-code').value;
            if(code) {
                promos[code] = { type: type, val: (type === 'coins' ? 100 : 1) };
                tg.showAlert(`–ö–æ–¥ ${code} —Å–æ–∑–¥–∞–Ω!`);
            }
        }

        // === –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï ===
        function openModal(id) {
            document.getElementById(id).classList.add('active');
        }
        function closeModal(id) {
            document.getElementById(id).classList.remove('active');
        }
        function saveData() {
            localStorage.setItem('user_data', JSON.stringify(user));
        }

        // –ó–∞–ø—É—Å–∫
        init();

    </script>
</body>
</html>
